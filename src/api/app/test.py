import unittest
from MongoDB import MongoDB


class Tests(unittest.TestCase):
     def test_read_song_by_id(self):
        mongo = MongoDB()
        song_id = '6471c3de55b8c9931ee61e9b' #Modificar id para conseguir un resultado erroneo 
        expected_result = {'_id': '6471c3de55b8c9931ee61e9b', 'artist_link': '/eminem/', 'song_name': 'Lose Yourself', 'song_link': '/eminem/lose-yourself.html', 'lyric': "Look, if you had one shot\nOr one opportunity\nTo seize everything you ever wanted\nOne moment\nWould you capture it, or just let it slip? Yo\n\nHis palms are sweaty\nKnees weak, arms are heavy\nThere's vomit on his sweater already\nMom's spaghetti, he's nervous\nBut on the surface he looks calm\nAnd ready to drop bombs\nBut he keeps on forgetting what he wrote down\nThe whole crowd goes so loud\nHe opens his mouth but the words won't come out\nHe's choking, how?\nEverybody's jokin' now\nThe clock's run out, time's up, over Blow!\n\nSnap back to reality\nOh there goes gravity\nOh there goes Rabbit, he choked, he's so mad\nBut he won't, give up that easy, no\nHe won't have it\nHe knows his whole back's to these ropes\nIt don't matter, he's dope, he knows that\nBut he's broke, he's so sad that he knows\nWhen he goes back to this mobile home\nThat's when it's back to the lab again, yo\nThis whole rhapsody\nHe better go capture this moment\nAnd hope it don't pass him\n\nYou better lose yourself in the music\nThe moment that you own it\nyou better never let it go\nYou only get one shot\nDo not miss your chance to blow\n'Cause opportunity comes once in a lifetime go\nYou better lose yourself in the music\nThe moment that you own it\nyou better never let it go\nYou only get one shot\nDo not miss your chance to blow\n'Cause opportunity comes once in a lifetime, yo\nYou better\n\nSoul's escapin'\nThrough this hole that is gaping\nThis world is mine for the taking\nMake me king\nAs we move toward a new world order\nA normal life is boring\nBut superstardom's close to post mortem\nIt only grows harder\nHomie grows hotter\nHe blows us all over\nThese hoes is all on him\nCoast to coast shows\nHe's known as the Globetrotter\nLonely roads\nGod only knows\nHe's grown farther from home, he's no father\nHe goes home and barely knows his own daughter\nBut hold ya nose\n'Cause here goes the cold water\nThese hoes don't want him no mo'\nHe's cold product\nAnd they moved on to the next schmoe who flows\nAnd he knows dove and sold nada\nAnd so the soap opera is told and unfolds\nI suppose it's old partner, but the beat goes on\nDa da dum da dum da da\n\nYou better lose yourself in the music\nThe moment that you own it\nyou better never let it go, oh\nYou only get one shot\nDo not miss your chance to blow\n'Cause opportunity comes once in a lifetime go\nYou better lose yourself in the music\nThe moment that you own it\nyou better never let it go, oh\nYou only get one shot\nDo not miss your chance to blow\n'Cause opportunity comes once in a lifetime, yo\nYou better\n\nNo more games\nI'ma change what you call rage\nTear this muthafuckin' roof off\nLike two dogs caged\nI was playin' in the beginnin'\nThe mood all changed\nI've been chewed up and spit out\nAnd booed off stage\nBut I kept rhymin'\nAnd stepwritin' the next cipher\nBest believe somebody's payin' the pied piper\nAll the pain inside amplified by the\nFact that I can't get by with my nine to five\nAnd I can't provide the right type of\nLife for my family 'cause man\nThese Goddamn food stamps don't buy diapers\nAnd there's no movie, there's no Mekhi Phifer\nThis is my life and these times are so hard\nAnd it's gettin' even harder\nTryin' to feed and water my seed\nPlus teeter-totter\nCaught up between bein' a father and a primadonna\nBaby momma drama, screamin' on her\nToo much for me to wanna stay in one spot\nAnother day of monotony\nHas gotten me to the point I'm like a snail\nI've got to formulate a plot\n'Fore end up in jail or shot\nSuccess is my only muthafuckin' option\nFailure's not\nMom I love you but this trailer's got to go\nI cannot grow old in Salem's Lot\nSo here I go, it's my shot\nFeet fail me not\n'Cause maybe the only opportunity that I got\nYou better\n\nLose yourself in the music\nThe moment that you own it\nyou better never let it go, oh\nYou only get one shot\nDo not miss your chance to blow\n'Cause opportunity comes once in a lifetime go\nYou better lose yourself in the music\nThe moment that you own it\nyou better never let it go, oh\nYou only get one shot\nDo not miss your chance to blow\n'Cause opportunity comes once in a lifetime, yo\nYou better\n\nYou can do anything if you set your mind to man", 'language': 'en', 'artist': {'name': 'Eminem', 'genres': ['Hip Hop', 'Rap'], 'songs': 486, 'popularity': 114.9, 'link': '/eminem/'}}
        result = mongo.read_song_by_id(song_id)
        self.assertEqual(result, expected_result, f'Error: se esperaba {expected_result}, se obtuvo {result}')

unittest.main()